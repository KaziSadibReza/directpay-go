import{r as e,j as s,b as a,R as r}from"./client-B7OwZW8e.js";import{c as i,P as d,U as n,S as l}from"./users-BKu--nfZ.js";
/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t=i("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),c=i("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),o=i("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),h=i("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),m=i("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),p=()=>{const[a,r]=e.useState([]),[i,p]=e.useState(!0),[j,v]=e.useState(""),[u,N]=e.useState(new Set),{restUrl:g="/wp-json/",restNonce:y=""}=window.directpayGoAdmin||{};e.useEffect(()=>{(async()=>{try{const e=await fetch(`${g}directpay/v1/admin/directpay-orders`,{headers:{"X-WP-Nonce":y}}),s=await e.json();s.success&&r(s.data||[])}catch(e){console.error("Error fetching orders:",e)}finally{p(!1)}})()},[g,y]);const S=j?a.filter(e=>{var s,a,r;const i=j.toLowerCase();return(null==(s=e.customer_name)?void 0:s.toLowerCase().includes(i))||(null==(a=e.customer_email)?void 0:a.toLowerCase().includes(i))||(null==(r=e.orders)?void 0:r.some(e=>e.order_id.toString().includes(i)))}):a,f=a.reduce((e,s)=>{var a;return null==(a=s.orders)||a.forEach(s=>{e.totalOrders++,s.paid_shipping?e.paidShipping++:e.freeShipping++}),e},{totalOrders:0,totalSessions:a.length,paidShipping:0,freeShipping:0});return i?s.jsx("div",{className:"directpay-orders-page",children:s.jsx("div",{className:"loading-state",children:"Loading orders..."})}):s.jsxs("div",{className:"directpay-orders-page",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{children:"DirectPay Go Orders"}),s.jsx("p",{children:"Orders created through DirectPay Go, organized by customer sessions"})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsx(x,{icon:d,label:"Total Orders",value:f.totalOrders}),s.jsx(x,{icon:n,label:"Customer Sessions",value:f.totalSessions}),s.jsx(x,{icon:o,label:"Paid Shipping",value:f.paidShipping,color:"orange"}),s.jsx(x,{icon:m,label:"Free Shipping",value:f.freeShipping,color:"green"})]}),s.jsxs("div",{className:"search-section",children:[s.jsx(l,{size:18,className:"search-icon"}),s.jsx("input",{type:"text",placeholder:"Search by customer name, email, or order ID...",value:j,onChange:e=>v(e.target.value)})]}),0===S.length?s.jsxs("div",{className:"empty-state",children:[s.jsx(d,{size:48}),s.jsx("p",{children:j?"No orders match your search":"No orders found"})]}):s.jsx("div",{className:"sessions-list",children:S.map(e=>{var a,r;const i=e.session_id||e.customer_email,d=u.has(i);return s.jsxs("div",{className:"session-card",children:[s.jsx("div",{className:"session-header",children:s.jsxs("button",{onClick:()=>{return e=i,void N(s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a});var e},children:[s.jsxs("div",{className:"session-left",children:[s.jsx("span",{className:"chevron-icon",children:d?s.jsx(t,{size:20}):s.jsx(c,{size:20})}),s.jsxs("div",{className:"customer-info",children:[s.jsx("h3",{children:e.customer_name}),s.jsx("p",{children:e.customer_email})]})]}),s.jsxs("div",{className:"session-right",children:[e.session_id&&e.session_active&&s.jsx("span",{className:"session-active-badge",children:"SESSION ACTIVE"}),s.jsxs("span",{className:"orders-count",children:[(null==(a=e.orders)?void 0:a.length)||0," orders"]})]})]})}),d&&s.jsx("div",{className:"orders-container",children:null==(r=e.orders)?void 0:r.map((e,a)=>s.jsx("div",{className:"order-card",children:s.jsxs("div",{className:"order-content",children:[s.jsxs("div",{className:"order-info",children:[s.jsxs("div",{className:"order-header-row",children:[s.jsxs("span",{className:"order-number",children:["#",a+1]}),s.jsxs("span",{className:"order-id",children:["Order #",e.order_id]}),s.jsx("span",{className:"shipping-badge "+(e.paid_shipping?"paid":"free"),children:e.paid_shipping?"ðŸ’° PAID SHIPPING":"ðŸŽ‰ FREE SHIPPING"})]}),s.jsxs("div",{className:"order-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-label",children:"Date:"}),s.jsx("span",{className:"detail-value",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-label",children:"Total:"}),s.jsx("span",{className:"detail-value bold",children:e.total})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-label",children:"Status:"}),s.jsx("span",{className:"detail-value",children:e.status})]})]})]}),s.jsx("div",{className:"order-actions",children:s.jsxs("a",{href:`/wp-admin/post.php?post=${e.order_id}&action=edit`,target:"_blank",rel:"noopener noreferrer",className:"view-button",children:["View in WooCommerce",s.jsx(h,{size:16})]})})]})},e.order_id))})]},i)})})]})},x=({icon:e,label:a,value:r,color:i})=>s.jsx("div",{className:"stat-card",children:s.jsxs("div",{className:"stat-content",children:[s.jsx("div",{className:`stat-icon ${i||"default"}`,children:s.jsx(e,{size:20})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("div",{className:"stat-value",children:r}),s.jsx("div",{className:"stat-label",children:a})]})]})});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("directpay-orders-root");if(e){a(e).render(s.jsx(r.StrictMode,{children:s.jsx(p,{})}))}});
